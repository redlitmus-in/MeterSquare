import{j as e}from"./radix-ui-34961435.js";import{r as s}from"./react-vendor-3707ac94.js";import{C as a,b as r,c as t,a as l}from"./card-e62b6216.js";import{a as c,B as i}from"./index-12cad093.js";import{L as n}from"./label-d100d551.js";import{l as d,b as m,az as x,s as o,R as g,X as p,am as b,aA as h,E as j,a8 as N,ah as u,T as v,F as y,z as f,w,k as A,v as S,a as F}from"./icons-2fde7931.js";import{m as C,A as k}from"./ui-vendor-42d562f2.js";const q=({documentType:q,documentId:R,currentUserRole:P})=>{const[L,E]=s.useState(!1),[G,Q]=s.useState(null),[T,D]=s.useState(""),[z,M]=s.useState(!1),[O,Y]=s.useState([]),[H,U]=s.useState([{id:"4",action:"Under Review",user:"David Lim",role:"Estimation",date:"2024-01-15 02:30 PM",type:"review"}]),I=e=>{switch(e){case"approved":return"bg-green-100 text-green-700 border-green-300";case"rejected":return"bg-red-100 text-red-700 border-red-300";case"in-review":return"bg-[#243d8a]/10 text-[#243d8a]/90 border-[#243d8a]/30";case"revision-requested":return"bg-amber-100 text-amber-700 border-amber-300";default:return"bg-gray-100 text-gray-600 border-gray-300"}},V=s=>{switch(s){case"approved":return e.jsx(F,{className:"w-5 h-5 text-green-600"});case"rejected":return e.jsx(S,{className:"w-5 h-5 text-red-600"});case"in-review":return e.jsx(A,{className:"w-5 h-5 text-[#243d8a] animate-pulse"});case"revision-requested":return e.jsx(w,{className:"w-5 h-5 text-amber-600"});default:return e.jsx(f,{className:"w-5 h-5 text-gray-400"})}},W=O.find(e=>"in-review"===e.status),B=W?.role===P;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-[#243d8a]/5 to-indigo-50 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 text-[#243d8a]"}),"Approval Workflow Status"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(c,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30",children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),"In Progress"]}),e.jsx(c,{className:"bg-gray-100 text-gray-700 border border-gray-300",children:"Step 3 of 5"})]})]})}),e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsx("span",{className:"font-semibold",children:"40% Complete"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx(C.div,{initial:{width:0},animate:{width:"40%"},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-[#243d8a] to-indigo-500 rounded-full"})})]}),e.jsx("div",{className:"space-y-4",children:O.map((s,a)=>e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"relative "+(a<O.length-1?"pb-4":""),children:[a<O.length-1&&e.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-300"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative z-10 bg-white rounded-full p-1",children:V(s.status)}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white rounded-lg border-2 p-4 "+("in-review"===s.status?"border-[#243d8a]/30 shadow-md":"border-gray-200"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:s.role}),e.jsx("p",{className:"text-sm text-gray-600",children:s.approver})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(c,{className:`${I(s.status)} border`,children:s.status.replace("-"," ").toUpperCase()}),s.date&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.date}),s.duration&&e.jsxs("p",{className:"text-xs text-gray-400",children:["Duration: ",s.duration]})]})]}),s.flags&&e.jsxs("div",{className:"flex gap-2 mb-2 flex-wrap",children:[void 0!==s.flags.pmFlag&&e.jsxs(c,{className:s.flags.pmFlag?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["PM FLAG ",s.flags.pmFlag?"✓":"⚠"]}),void 0!==s.flags.costFlag&&e.jsxs(c,{className:s.flags.costFlag?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["COST FLAG ",s.flags.costFlag?"✓":"⚠"]}),void 0!==s.flags.qtySpecFlag&&e.jsxs(c,{className:s.flags.qtySpecFlag?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["QTY/SPEC FLAG ",s.flags.qtySpecFlag?"✓":"⚠"]}),void 0!==s.flags.qtyScopeFlag&&e.jsxs(c,{className:s.flags.qtyScopeFlag?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["QTY/SCOPE FLAG ",s.flags.qtyScopeFlag?"✓":"⚠"]}),void 0!==s.flags.qtySpecReqFlag&&e.jsxs(c,{className:s.flags.qtySpecReqFlag?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["QTY/SPEC/REQ FLAG ",s.flags.qtySpecReqFlag?"✓":"⚠"]}),void 0!==s.flags.flag&&e.jsxs(c,{className:s.flags.flag?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["FLAG ",s.flags.flag?"✓":"⚠"]}),void 0!==s.flags.compliance&&e.jsxs(c,{className:s.flags.compliance?"bg-green-100 text-green-700 border-green-300":"bg-amber-100 text-amber-700 border-amber-300",children:["COMPLIANCE ",s.flags.compliance?"✓":"⚠"]})]}),s.comments&&e.jsx("div",{className:"bg-gray-50 rounded p-2 mt-2",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx(x,{className:"w-3 h-3 inline mr-1 text-gray-500"}),s.comments]})}),"in-review"===s.status&&B&&e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[e.jsxs(i,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{Q("approve"),E(!0)},children:[e.jsx(o,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs(i,{size:"sm",variant:"outline",className:"border-amber-500 text-amber-600 hover:bg-amber-50",onClick:()=>{Q("revise"),E(!0)},children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),"Request Revision"]}),e.jsxs(i,{size:"sm",variant:"outline",className:"border-red-500 text-red-600 hover:bg-red-50",onClick:()=>{Q("reject"),E(!0)},children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})})]})]},s.id))})]})]}),e.jsx(k,{children:L&&e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:e.jsxs(a,{className:"shadow-lg border-2 border-[#243d8a]/20",children:[e.jsx(r,{className:("approve"===G?"bg-green-50":"reject"===G?"bg-red-50":"bg-amber-50")+" border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:["approve"===G&&e.jsx(o,{className:"w-5 h-5 text-green-600"}),"reject"===G&&e.jsx(p,{className:"w-5 h-5 text-red-600"}),"revise"===G&&e.jsx(g,{className:"w-5 h-5 text-amber-600"}),"approve"===G&&"Approve Document","reject"===G&&"Reject Document","revise"===G&&"Request Revision"]})}),e.jsxs(l,{className:"p-6 space-y-4",children:["approve"===G&&e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-semibold mb-2 block",children:"Approval Flags (As Per Workflow Requirements)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"PM FLAG - Project Manager Approval"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"COST FLAG - Cost Approval"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"QTY/SPEC FLAG - Quantity & Specification"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"QTY/SCOPE FLAG - Quantity & Scope"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"QTY/SPEC/REQ FLAG - Quantity, Spec & Requirements"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"FLAG - Generic Approval Flag"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Compliance Verified"})]})]})]}),"revise"===G&&e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-semibold mb-2 block",children:"Areas Requiring Revision"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-amber-600"}),e.jsx("span",{className:"text-sm",children:"Quantity Adjustment"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-amber-600"}),e.jsx("span",{className:"text-sm",children:"Specification Changes"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-amber-600"}),e.jsx("span",{className:"text-sm",children:"Cost Revision"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-amber-600"}),e.jsx("span",{className:"text-sm",children:"Documentation Update"})]})]})]}),e.jsxs("div",{children:[e.jsxs(n,{className:"text-sm font-semibold mb-2 block",children:["Comments ","reject"===G&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:T,onChange:e=>D(e.target.value),className:"w-full min-h-[100px] p-3 border border-gray-200 rounded-lg focus:border-[#243d8a] focus:ring-1 focus:ring-[#243d8a]",placeholder:"approve"===G?"Add approval comments (optional)...":"reject"===G?"Provide reason for rejection (required)...":"Specify required revisions..."})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-semibold mb-2 block",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx(b,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Drop files here or click to upload"}),e.jsx(i,{variant:"outline",size:"sm",className:"mt-2",children:"Select Files"})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[e.jsx(i,{variant:"outline",onClick:()=>{E(!1),Q(null),D("")},children:"Cancel"}),e.jsxs(i,{className:"approve"===G?"bg-green-600 hover:bg-green-700":"reject"===G?"bg-red-600 hover:bg-red-700":"bg-amber-600 hover:bg-amber-700",onClick:()=>(E(!1),Q(null),void D("")),children:[e.jsx(h,{className:"w-4 h-4 mr-1"}),"approve"===G&&"Submit Approval","reject"===G&&"Submit Rejection","revise"===G&&"Request Revision"]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(a,{className:"shadow-md",children:[e.jsx(r,{className:"bg-gray-50 border-b",children:e.jsxs(t,{className:"text-base flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4 text-gray-600"}),"Quick Actions"]})}),e.jsxs(l,{className:"p-4 space-y-2",children:[e.jsxs(i,{variant:"outline",className:"w-full justify-start text-sm",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"View Full Document"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start text-sm",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start text-sm",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Add Comment"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start text-sm",onClick:()=>M(!z),children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),z?"Hide":"View"," History"]})]})]}),e.jsxs(a,{className:"shadow-md",children:[e.jsx(r,{className:"bg-gray-50 border-b",children:e.jsxs(t,{className:"text-base flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-gray-600"}),"Approval Metrics"]})}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Average Approval Time"}),e.jsx("span",{className:"font-semibold text-sm",children:"2.5 hours"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Steps Completed"}),e.jsx("span",{className:"font-semibold text-sm",children:"2 of 5"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Completion"}),e.jsx("span",{className:"font-semibold text-sm",children:"Today, 6:00 PM"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Priority Level"}),e.jsx(c,{className:"bg-amber-100 text-amber-700 border border-amber-300",children:"High"})]})]})})]})]}),e.jsx(k,{children:z&&e.jsx(C.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsxs(a,{className:"shadow-md",children:[e.jsx(r,{className:"bg-gray-50 border-b",children:e.jsxs(t,{className:"text-base flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-gray-600"}),"Approval History"]})}),e.jsx(l,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:H.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+("approve"===s.type?"bg-green-100 text-green-600":"reject"===s.type?"bg-red-100 text-red-600":"review"===s.type?"bg-[#243d8a]/10 text-[#243d8a]":"bg-gray-100 text-gray-600"),children:["approve"===s.type&&e.jsx(o,{className:"w-4 h-4"}),"reject"===s.type&&e.jsx(p,{className:"w-4 h-4"}),"review"===s.type&&e.jsx(j,{className:"w-4 h-4"}),"create"===s.type&&e.jsx(y,{className:"w-4 h-4"}),"submit"===s.type&&e.jsx(h,{className:"w-4 h-4"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.action}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.user," • ",s.role]}),s.comments&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 italic",children:['"',s.comments,'"']})]}),e.jsx("span",{className:"text-xs text-gray-400",children:s.date})]})})]},s.id))})})]})})})]})};export{q as A};
