import{j as e}from"./radix-ui-34961435.js";import{u as a,r as t}from"./react-vendor-3707ac94.js";import{B as s}from"./BaseDashboard-6080d357.js";import{B as i,M as r,a as l,t as n}from"./index-12cad093.js";import{C as d}from"./card-e62b6216.js";import{e as o}from"./estimationService-c5e68334.js";import{aB as c,i as m,v as x,T as h,R as p,k as v,z as g,c as u,B as b,ag as j,ar as y,b as f}from"./icons-2fde7931.js";import{m as N,A as w}from"./ui-vendor-42d562f2.js";import"./auth-f9290e45.js";import"./utils-8e4480a0.js";import"./forms-337f692b.js";const _=()=>{const _=a(),[k,A]=t.useState(!0),[H,S]=t.useState(!1),[C,E]=t.useState({pending:0,approved:0,rejected:0,totalValue:0});t.useEffect(()=>{(async()=>{try{A(!0);const e=await o.getEstimationDashboard();e?.estimation_as_receiver&&E({pending:e.estimation_as_receiver.pending_count,approved:e.estimation_as_receiver.approved_count,rejected:e.estimation_as_receiver.rejected_count,totalValue:e.estimation_as_receiver.pending_value})}catch(e){}finally{A(!1)}})()},[]);const R=C.totalValue,V=()=>{_("/estimation")},D=[{title:"Quotes Pending",value:C.pending.toString(),change:C.pending>0?`+${C.pending}`:"0",icon:c,color:"amber"},{title:"Approved Budgets",value:C.approved.toString(),change:C.approved>0?`+${Math.min(5,C.approved)}`:"0",icon:m,color:"green"},{title:"Rejected",value:C.rejected.toString(),icon:x,color:"red"},{title:"Total Estimated",value:`AED ${(R/1e6).toFixed(1)}M`,change:R>0?"+":"0",icon:h,color:"purple"}],O={hidden:{opacity:0,y:20},visible:{opacity:1,y:0},hover:{y:-4,transition:{duration:.2}}},I={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},P={scale:[1,1.05,1],transition:{duration:2,repeat:1/0,ease:"easeInOut"}},T=e.jsxs(N.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:[e.jsx(N.div,{variants:O,whileHover:"hover",transition:{duration:.3},children:e.jsxs(d,{className:"p-6 bg-gradient-to-br from-red-50 via-rose-50 to-pink-50 border-red-200 shadow-lg hover:shadow-xl transition-all duration-300 backdrop-blur-sm",style:{background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 50%, #fecaca 100%)"},children:[e.jsxs(N.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N.div,{animate:C.pending>0?P:{},className:"p-2 bg-red-100 rounded-lg",children:e.jsx(c,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-800",children:"Pending Cost Reviews"}),e.jsx("p",{className:"text-xs text-red-600",children:"Requiring immediate attention"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(i,{size:"sm",onClick:V,className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(c,{className:"w-4 h-4 mr-1"}),"Review All"]})}),e.jsx(N.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(i,{size:"sm",variant:"outline",onClick:async()=>{S(!0);try{const e=await o.getEstimationDashboard();e?.estimation_as_receiver&&E({pending:e.estimation_as_receiver.pending_count,approved:e.estimation_as_receiver.approved_count,rejected:e.estimation_as_receiver.rejected_count,totalValue:e.estimation_as_receiver.pending_value}),n.success("Data refreshed")}catch(e){}finally{S(!1)}},disabled:H,className:"border-red-300 hover:bg-red-100 hover:border-red-400 transition-all duration-300",children:H?e.jsx(r,{variant:"pulse-wave",size:"lg"}):e.jsx(p,{className:"w-4 h-4"})})})]})]}),e.jsx(w,{mode:"wait",children:k?e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"relative",children:[e.jsx(N.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(r,{variant:"pulse-wave",size:"lg"})}),e.jsx(N.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5},className:"absolute inset-0 rounded-full border-2 border-red-200 border-t-red-500"})]})},"loading"):0===C.pending?e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"text-center py-12",children:[e.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"mb-6",children:e.jsx("div",{className:"relative",children:e.jsx(v,{className:"w-16 h-16 mx-auto text-red-300"})})}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[e.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"All Caught Up! ðŸŽ‰"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No pending cost reviews at this time"}),e.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"All purchase requests are up to date"})]})]},"empty"):e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"space-y-4",children:e.jsxs(N.div,{variants:I,className:"relative p-6 bg-white/90 backdrop-blur-sm rounded-xl border border-red-200 shadow-lg hover:shadow-xl transition-all duration-300",whileHover:{scale:1.02},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-400 to-rose-500 rounded-t-xl"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"p-3 bg-gradient-to-br from-red-100 to-rose-100 rounded-lg",children:e.jsx(g,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-red-900 flex items-center gap-2",children:[C.pending," Purchase Request",C.pending>1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting cost analysis review"}),e.jsxs(N.p,{className:"text-sm font-semibold text-red-700 mt-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:["ðŸ’° Total Value: AED ",C.totalValue.toLocaleString()]})]})]}),e.jsx(N.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsxs(l,{className:"bg-gradient-to-r from-red-500 to-rose-500 text-white px-4 py-2 shadow-md",children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),"High Priority"]})})]}),e.jsx(N.div,{className:"mt-6 pt-4 border-t border-red-100",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:e.jsx(N.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(i,{className:"w-full bg-gradient-to-r from-red-500 via-rose-500 to-red-600 hover:from-red-600 hover:via-rose-600 hover:to-red-700 text-white font-semibold py-3 shadow-lg hover:shadow-xl transition-all duration-300",onClick:V,children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(c,{className:"w-5 h-5"}),e.jsx("span",{children:"Start Cost Analysis Reviews"}),e.jsx(N.div,{animate:{x:[0,4,0]},transition:{duration:1.5,repeat:1/0},children:"â†’"})]})})})})]})},"content")})]})}),e.jsx(N.div,{variants:O,whileHover:"hover",transition:{duration:.3},children:e.jsxs(d,{className:"p-6 bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 border-blue-200 shadow-lg hover:shadow-xl transition-all duration-300 backdrop-blur-sm overflow-hidden relative",style:{background:"linear-gradient(135deg, #dbeafe 0%, #e0e7ff 50%, #bfdbfe 100%)"},children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-10",children:e.jsx(N.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:e.jsx(b,{className:"w-12 h-12 text-blue-600"})})}),e.jsxs(N.div,{className:"flex items-center gap-3 mb-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx(N.div,{className:"p-2 bg-blue-100 rounded-lg",whileHover:{rotate:5,scale:1.1},children:e.jsx(b,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"Cost Analysis Summary"}),e.jsx("p",{className:"text-xs text-blue-600",children:"Real-time performance metrics"})]})]}),e.jsxs(N.div,{className:"space-y-4",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:[e.jsxs(N.div,{variants:I,className:"relative p-4 bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-md hover:shadow-lg transition-all duration-300",whileHover:{scale:1.02,x:4},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(h,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Average Variance"})]}),e.jsx(N.span,{className:"font-bold text-green-600 text-xl",initial:{scale:.8},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200},children:"-3.5%"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-green-400 to-emerald-500 rounded-b-xl opacity-80"})]}),e.jsxs(N.div,{variants:I,className:"relative p-4 bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-md hover:shadow-lg transition-all duration-300",whileHover:{scale:1.02,x:4},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(j,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Total Estimated"})]}),e.jsxs(N.span,{className:"font-bold text-blue-800 text-xl",initial:{scale:.8},animate:{scale:1},transition:{delay:.4,type:"spring",stiffness:200},children:["AED ",(C.totalValue/1e6).toFixed(1),"M"]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-b-xl opacity-80"})]}),e.jsxs(N.div,{variants:I,className:"relative p-4 bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-md hover:shadow-lg transition-all duration-300",whileHover:{scale:1.02,x:4},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(v,{className:"w-4 h-4 text-amber-600"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Pending Value"})]}),e.jsxs(N.span,{className:"font-bold text-amber-600 text-xl",initial:{scale:.8},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},children:["AED ",C.totalValue.toLocaleString()]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-amber-400 to-orange-500 rounded-b-xl opacity-80"})]}),e.jsxs(N.div,{variants:I,className:"relative p-4 bg-white/80 backdrop-blur-sm rounded-xl border border-blue-200 shadow-md hover:shadow-lg transition-all duration-300",whileHover:{scale:1.02,x:4},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N.div,{className:"p-2 bg-green-100 rounded-lg",animate:C.approved>0?{scale:[1,1.1,1]}:{},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(y,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Reviews Completed"})]}),e.jsx(N.span,{className:"font-bold text-green-600 text-xl",initial:{scale:.8},animate:{scale:1},transition:{delay:.6,type:"spring",stiffness:200},children:C.approved})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-green-400 to-emerald-500 rounded-b-xl opacity-80"})]})]})]})}),e.jsx(N.div,{variants:O,whileHover:"hover",transition:{duration:.3},className:"lg:col-span-2",children:e.jsxs(d,{className:"p-6 bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 border-green-200 shadow-lg hover:shadow-xl transition-all duration-300 backdrop-blur-sm overflow-hidden relative",style:{background:"linear-gradient(135deg, #dcfce7 0%, #d1fae5 50%, #bbf7d0 100%)"},children:[e.jsx("div",{className:"absolute top-4 right-4 opacity-10",children:e.jsx(N.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:15,repeat:1/0,ease:"easeInOut"},children:e.jsx(f,{className:"w-12 h-12 text-green-600"})})}),e.jsxs(N.div,{className:"flex items-center gap-3 mb-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsx(N.div,{className:"p-2 bg-green-100 rounded-lg",whileHover:{rotate:10,scale:1.1},children:e.jsx(f,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-green-900",children:"Estimation Activity Overview"}),e.jsx("p",{className:"text-xs text-green-600",children:"Live activity tracking & status updates"})]})]}),e.jsx(w,{mode:"wait",children:k?e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center py-12",children:e.jsx(N.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(r,{variant:"pulse-wave",size:"lg"})})},"loading"):e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.approved>0&&e.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"relative p-5 bg-white/90 backdrop-blur-sm rounded-xl border border-green-200 shadow-lg hover:shadow-xl transition-all duration-300",whileHover:{y:-4},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-400 to-emerald-500 rounded-t-xl"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(N.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"p-3 bg-green-100 rounded-lg",children:e.jsx(m,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-800",children:C.approved}),e.jsx("p",{className:"text-xs text-gray-600",children:"Approved"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Successfully completed cost analysis"}),e.jsx(N.div,{initial:{width:0},animate:{width:"100%"},transition:{delay:.5,duration:1},className:"mt-3 h-2 bg-green-200 rounded-full overflow-hidden",children:e.jsx(N.div,{initial:{width:"0%"},animate:{width:"100%"},transition:{delay:1,duration:1},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500"})})]}),C.pending>0&&e.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"relative p-5 bg-white/90 backdrop-blur-sm rounded-xl border border-amber-200 shadow-lg hover:shadow-xl transition-all duration-300",whileHover:{y:-4},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-400 to-rose-500 rounded-t-xl"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(N.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"p-3 bg-amber-100 rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-amber-800",children:C.pending}),e.jsx("p",{className:"text-xs text-gray-600",children:"Pending"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["AED ",C.totalValue.toLocaleString()]}),e.jsx(N.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"mt-3 h-2 bg-amber-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 w-3/4"})})]}),C.rejected>0&&e.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"relative p-5 bg-white/90 backdrop-blur-sm rounded-xl border border-red-200 shadow-lg hover:shadow-xl transition-all duration-300",whileHover:{y:-4},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-400 to-rose-500 rounded-t-xl"}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(N.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"p-3 bg-red-100 rounded-lg",children:e.jsx(x,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-800",children:C.rejected}),e.jsx("p",{className:"text-xs text-gray-600",children:"Rejected"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sent back for revision"}),e.jsx("div",{className:"mt-3 h-2 bg-red-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-400 to-rose-500 w-1/2"})})]}),0===C.approved&&0===C.pending&&0===C.rejected&&e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"col-span-full text-center py-12",children:[e.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.5},className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"w-16 h-16 mx-auto text-green-300"}),e.jsx(N.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 w-16 h-16 mx-auto border-4 border-green-300 rounded-full"})]})}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[e.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Ready for Action! ðŸš€"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No recent estimation activity"}),e.jsx("p",{className:"text-xs text-green-600 mt-2 font-medium",children:"Activity will appear here once purchases are assigned"})]})]})]},"content")})]})})]});return e.jsx(s,{title:"Estimation Dashboard",subtitle:"Cost analysis and budget management",metrics:D,roleSpecificContent:T})};export{_ as default};
