import{j as e}from"./radix-ui-34961435.js";import{r as s}from"./react-vendor-3707ac94.js";import{C as a,b as r,c as t,a as l}from"./card-e62b6216.js";import{a as i,B as c}from"./index-12cad093.js";import{T as n,a as d,b as o,c as x}from"./tabs-8d248749.js";import{A as m}from"./ApprovalWorkflow-1ba72061.js";import{u as g}from"./forms-337f692b.js";import{I as p}from"./input-dbd0a11e.js";import{D as h}from"./date-input-8a4c9816.js";import{L as j}from"./label-d100d551.js";import{S as u,a as N,b as v,c as y,d as b}from"./select-767f455e.js";import{m as f}from"./ui-vendor-42d562f2.js";import{h as w,g as S,w as D,F as q,aw as C,l as k,aj as Q,z as A,u as P,k as I,aM as R,Q as T,aN as M,U as _,a3 as L,G as B,t as E,E as O,i as z,aO as F,aF as V,a2 as U,aA as W,b as G,A as $,aP as Y,aa as H}from"./icons-2fde7931.js";import"./auth-f9290e45.js";import"./utils-8e4480a0.js";import"./dateFormatter-3b370b4b.js";const J=()=>{const[m,G]=s.useState("basic"),[$,Y]=s.useState([{id:"1",materialCode:"STL-001",materialName:"Steel Rebar 12mm",specification:"Grade 460B, 12mm diameter",orderedQuantity:100,deliveredQuantity:100,acceptedQuantity:95,rejectedQuantity:5,unit:"piece",condition:"good",batchNumber:"STL2024001",storageLocation:"Warehouse A-1",remarks:"Minor surface rust on 5 pieces"}]),{register:H,handleSubmit:J,watch:K,setValue:X,formState:{errors:Z}}=g(),ee=(e,s,a)=>{Y(r=>r.map(r=>{if(r.id===e){const e={...r,[s]:a};return"deliveredQuantity"!==s&&"acceptedQuantity"!==s||("deliveredQuantity"===s?(e.acceptedQuantity=a,e.rejectedQuantity=0):"acceptedQuantity"===s&&(e.rejectedQuantity=e.deliveredQuantity-a)),e}return r}))},se=$.reduce((e,s)=>e+s.deliveredQuantity,0),ae=$.reduce((e,s)=>e+s.acceptedQuantity,0),re=$.reduce((e,s)=>e+s.rejectedQuantity,0);return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsx(a,{className:"shadow-lg border-0 bg-gradient-to-r from-green-50 to-green-100",children:e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/60 rounded-lg",children:e.jsx(w,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx(t,{className:"text-2xl font-bold text-gray-800",children:"Material Delivery Note"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Site Works & Production Material Delivery"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{className:"bg-green-100 text-green-700 border border-green-300",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),$.length," Items"]}),re>0&&e.jsxs(i,{className:"bg-red-100 text-red-700 border border-red-300",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),re," Rejected"]})]})]})})}),e.jsxs("form",{onSubmit:J(e=>{(new Date).toISOString()}),children:[e.jsxs(n,{value:m,onValueChange:G,className:"space-y-6",children:[e.jsxs(d,{className:"grid grid-cols-4 w-full max-w-2xl bg-white shadow-sm border",children:[e.jsxs(o,{value:"basic",className:"data-[state=active]:bg-green-50 data-[state=active]:text-green-700",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Delivery Info"]}),e.jsxs(o,{value:"supplier",className:"data-[state=active]:bg-green-50 data-[state=active]:text-green-700",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Supplier"]}),e.jsxs(o,{value:"items",className:"data-[state=active]:bg-green-50 data-[state=active]:text-green-700",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Items"]}),e.jsxs(o,{value:"inspection",className:"data-[state=active]:bg-green-50 data-[state=active]:text-green-700",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Inspection"]})]}),e.jsx(x,{value:"basic",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-green-50 to-green-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-green-600"}),"Delivery Information"]})}),e.jsxs(l,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4 text-green-500"}),"Delivery Note Number"]}),e.jsx(p,{...H("deliveryNoteNumber",{required:"Delivery note number is required"}),placeholder:"DN-2024-001",className:"focus:border-green-500 focus:ring-green-500"}),Z.deliveryNoteNumber&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),Z.deliveryNoteNumber.message]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4 text-green-500"}),"Purchase Order Number"]}),e.jsx(p,{...H("purchaseOrderNumber",{required:"PO number is required"}),placeholder:"PO-2024-001",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4 text-green-500"}),"Delivery Date"]}),e.jsx(h,{placeholder:"dd/mm/yyyy",...H("deliveryDate",{required:"Delivery date is required"}),className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4 text-green-500"}),"Delivery Time"]}),e.jsx(p,{type:"time",...H("deliveryTime",{required:"Delivery time is required"}),className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4 text-green-500"}),"Expected Delivery Date"]}),e.jsx(h,{placeholder:"dd/mm/yyyy",...H("expectedDeliveryDate"),className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-green-500"}),"Delivery Type"]}),e.jsxs(u,{onValueChange:e=>X("deliveryType",e),children:[e.jsx(N,{className:"focus:border-green-500 focus:ring-green-500",children:e.jsx(v,{placeholder:"Select delivery type"})}),e.jsxs(y,{children:[e.jsx(b,{value:"full",children:"Full Delivery"}),e.jsx(b,{value:"partial",children:"Partial Delivery"}),e.jsx(b,{value:"emergency",children:"Emergency Delivery"}),e.jsx(b,{value:"back_order",children:"Back Order"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4 text-green-500"}),"Project Name"]}),e.jsx(p,{...H("projectName",{required:"Project name is required"}),placeholder:"Marina Bay Residential",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4 text-green-500"}),"Project ID"]}),e.jsx(p,{...H("projectId",{required:"Project ID is required"}),placeholder:"PRJ-2024-001",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4 text-green-500"}),"Site Location"]}),e.jsx(p,{...H("siteLocation",{required:"Site location is required"}),placeholder:"Block A, Marina Bay Construction Site",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),"Urgency Level"]}),e.jsxs(u,{onValueChange:e=>X("urgencyLevel",e),children:[e.jsx(N,{className:"focus:border-green-500 focus:ring-green-500",children:e.jsx(v,{placeholder:"Select urgency"})}),e.jsxs(y,{children:[e.jsx(b,{value:"normal",children:"Normal"}),e.jsx(b,{value:"high",children:"High Priority"}),e.jsx(b,{value:"urgent",children:"Urgent"}),e.jsx(b,{value:"critical",children:"Critical"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-green-500"}),"Special Instructions"]}),e.jsx("textarea",{...H("specialInstructions"),rows:3,placeholder:"Special delivery instructions, safety requirements, handling notes...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-500"})]})]})]})}),e.jsx(x,{value:"supplier",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-green-50 to-green-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-600"}),"Supplier & Transport Details"]})}),e.jsx(l,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4 text-green-500"}),"Supplier Name"]}),e.jsx(p,{...H("supplierName",{required:"Supplier name is required"}),placeholder:"Singapore Steel Suppliers Pte Ltd",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4 text-green-500"}),"Contact Person"]}),e.jsx(p,{...H("supplierContact",{required:"Contact person is required"}),placeholder:"John Tan",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4 text-green-500"}),"Supplier Phone"]}),e.jsx(p,{...H("supplierPhone",{required:"Supplier phone is required"}),placeholder:"+65 9123 4567",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4 text-green-500"}),"Vehicle Number"]}),e.jsx(p,{...H("vehicleNumber",{required:"Vehicle number is required"}),placeholder:"SG1234A",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4 text-green-500"}),"Driver Name"]}),e.jsx(p,{...H("driverName",{required:"Driver name is required"}),placeholder:"Ahmad bin Hassan",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4 text-green-500"}),"Driver License Number"]}),e.jsx(p,{...H("driverLicense",{required:"Driver license is required"}),placeholder:"S1234567A",className:"focus:border-green-500 focus:ring-green-500"})]})]})})]})}),e.jsx(x,{value:"items",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-green-50 to-green-100 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-green-600"}),"Delivery Items"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs(i,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30",children:["Delivered: ",se]}),e.jsxs(i,{className:"bg-green-100 text-green-700 border border-green-300",children:["Accepted: ",ae]}),e.jsxs(i,{className:"bg-red-100 text-red-700 border border-red-300",children:["Rejected: ",re]})]}),e.jsxs(c,{type:"button",size:"sm",onClick:()=>{const e={id:Date.now().toString(),materialCode:"",materialName:"",specification:"",orderedQuantity:0,deliveredQuantity:0,acceptedQuantity:0,rejectedQuantity:0,unit:"piece",condition:"good",batchNumber:"",storageLocation:"",remarks:""};Y([...$,e])},className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"Add Item"]})]})]})}),e.jsx(l,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Specification"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ordered"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Delivered"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Accepted"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rejected"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Condition"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Storage"}),e.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:$.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{value:s.materialCode,onChange:e=>ee(s.id,"materialCode",e.target.value),className:"min-w-[80px] text-xs",placeholder:"Code"}),e.jsx(p,{value:s.materialName,onChange:e=>ee(s.id,"materialName",e.target.value),className:"min-w-[120px] text-xs",placeholder:"Material name"})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{value:s.specification,onChange:e=>ee(s.id,"specification",e.target.value),className:"min-w-[150px] text-xs",placeholder:"Specification"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs(u,{value:s.unit,onValueChange:e=>ee(s.id,"unit",e),children:[e.jsx(N,{className:"min-w-[70px]",children:e.jsx(v,{})}),e.jsxs(y,{children:[e.jsx(b,{value:"piece",children:"Pcs"}),e.jsx(b,{value:"meter",children:"M"}),e.jsx(b,{value:"kg",children:"Kg"}),e.jsx(b,{value:"liter",children:"L"}),e.jsx(b,{value:"sqm",children:"SqM"}),e.jsx(b,{value:"cum",children:"CuM"})]})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{type:"number",value:s.orderedQuantity,onChange:e=>ee(s.id,"orderedQuantity",Number(e.target.value)),className:"min-w-[60px] text-xs"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{type:"number",value:s.deliveredQuantity,onChange:e=>ee(s.id,"deliveredQuantity",Number(e.target.value)),className:"min-w-[60px] text-xs"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{type:"number",value:s.acceptedQuantity,onChange:e=>ee(s.id,"acceptedQuantity",Number(e.target.value)),className:"min-w-[60px] text-xs"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{type:"number",value:s.rejectedQuantity,readOnly:!0,className:"min-w-[60px] text-xs bg-gray-50"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs(u,{value:s.condition,onValueChange:e=>ee(s.id,"condition",e),children:[e.jsx(N,{className:"min-w-[90px]",children:e.jsx(v,{})}),e.jsxs(y,{children:[e.jsx(b,{value:"good",children:"Good"}),e.jsx(b,{value:"damaged",children:"Damaged"}),e.jsx(b,{value:"incomplete",children:"Incomplete"}),e.jsx(b,{value:"defective",children:"Defective"})]})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{value:s.batchNumber,onChange:e=>ee(s.id,"batchNumber",e.target.value),className:"min-w-[80px] text-xs",placeholder:"Batch No."})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx(p,{value:s.storageLocation,onChange:e=>ee(s.id,"storageLocation",e.target.value),className:"min-w-[80px] text-xs",placeholder:"Location"})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx(c,{type:"button",size:"sm",variant:"outline",onClick:()=>{return e=s.id,void Y($.filter(s=>s.id!==e));var e},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(E,{className:"w-4 h-4"})})})]},s.id))})]})})})]})}),e.jsx(x,{value:"inspection",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-green-50 to-green-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-green-600"}),"Inspection & Approval"]})}),e.jsxs(l,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(_,{className:"w-4 h-4 text-green-500"}),"Received By"]}),e.jsx(p,{...H("receivedBy",{required:"Receiver name is required"}),placeholder:"Site Supervisor / Store In Charge",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-green-500"}),"Receiver Designation"]}),e.jsx(p,{...H("receiverDesignation",{required:"Designation is required"}),placeholder:"Site Supervisor",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4 text-green-500"}),"Inspected By"]}),e.jsx(p,{...H("inspectedBy",{required:"Inspector name is required"}),placeholder:"Quality Control Inspector",className:"focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4 text-green-500"}),"Approved By"]}),e.jsx(p,{...H("approvedBy",{required:"Approver name is required"}),placeholder:"Project Manager",className:"focus:border-green-500 focus:ring-green-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4 text-green-500"}),"Quality Inspection Remarks"]}),e.jsx("textarea",{...H("qualityRemarks"),rows:4,placeholder:"Quality inspection findings, defects noted, compliance status...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4 text-green-500"}),"Storage Instructions"]}),e.jsx("textarea",{...H("storageInstructions"),rows:3,placeholder:"Storage location, handling requirements, environmental conditions...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-green-500"}),"Safety Requirements"]}),e.jsx("textarea",{...H("safetyRequirements"),rows:3,placeholder:"Safety protocols during unloading, handling precautions, PPE requirements...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-green-500 focus:ring-1 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4 text-green-500"}),"Supporting Documents"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-300 transition-colors",children:[e.jsx(V,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload photos, inspection reports, certificates"}),e.jsx(c,{type:"button",variant:"outline",size:"sm",children:"Select Files"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-green-600",children:se}),e.jsx("div",{className:"text-sm text-gray-600",children:"Items Delivered"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-green-600",children:ae}),e.jsx("div",{className:"text-sm text-gray-600",children:"Items Accepted"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-red-600",children:re}),e.jsx("div",{className:"text-sm text-gray-600",children:"Items Rejected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-[#243d8a]",children:0===re?"100%":`${Math.round(ae/se*100)}%`}),e.jsx("div",{className:"text-sm text-gray-600",children:"Acceptance Rate"})]})]})]})]})})]}),e.jsx(a,{className:"shadow-lg border-2 border-green-200",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{className:"font-semibold",children:["Delivery Status:",e.jsx("span",{className:"ml-2 px-2 py-1 rounded text-xs "+(0===re?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:0===re?"Complete":"Partial"})]}),e.jsxs("p",{className:"text-xs mt-1",children:["This delivery note requires QTY/SPEC/REQ FLAG approval for ",re>0?"partial":"full"," acceptance"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{type:"button",variant:"outline",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),"Save Draft"]}),e.jsxs(c,{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),"Submit for Approval"]})]})]})})})]})]})},K=()=>{const[g,p]=s.useState("overview"),[h,j]=s.useState(null),[u,N]=s.useState(!1),[v,y]=s.useState(!1),[b,D]=s.useState([]),Q=e=>{switch(e){case"critical":return"bg-red-100 text-red-700 border-red-300";case"urgent":return"bg-orange-100 text-orange-700 border-orange-300";case"high":return"bg-yellow-100 text-yellow-700 border-yellow-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},A=[{stage:"material_request",label:"Material Request Raised",actor:"Site/MEP Supervisor"},{stage:"delivery_note",label:"Material Delivery Note Issued",actor:"Procurement"},{stage:"note_approval",label:"Delivery Note Approval",actor:"Project Manager / Procurement"},{stage:"bulk_qty_request",label:"Bulk Qty Dispatch Request",actor:"When Needed"},{stage:"bulk_qty_approval",label:"Bulk Qty Dispatch Approval",actor:"Technical Director"},{stage:"site_delivery",label:"Site Delivery Execution",actor:"As Per Approved Note"},{stage:"delivery_acknowledgement",label:"Delivery Acknowledgement",actor:"Site Team"},{stage:"design_reference",label:"Design Reference Inputs",actor:"Design"},{stage:"task_completion",label:"Task Completion",actor:"System"}],P=b.length,R=b.filter(e=>"pending_approval"===e.status).length,M=b.filter(e=>"dispatched"===e.status||"delivered"===e.status).length,L=b.filter(e=>"delivered"===e.status||"acknowledged"===e.status).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl shadow-xl p-6 text-gray-800 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/60 rounded-lg",children:e.jsx(w,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Material Dispatch - Site Works"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Site Material Delivery & Installation Support"})]})]}),e.jsxs(c,{onClick:()=>y(!0),className:"bg-orange-600 hover:bg-orange-700 text-white flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"New Delivery Note"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Dispatches"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:P})]})]})})}),e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(I,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:R})]})]})})}),e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(S,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Dispatched"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:M})]})]})})}),e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(z,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:L})]})]})})})]}),e.jsxs(n,{value:g,onValueChange:p,className:"space-y-6",children:[e.jsxs(d,{className:"grid grid-cols-3 w-full max-w-md bg-white shadow-sm border",children:[e.jsxs(o,{value:"overview",className:"data-[state=active]:bg-orange-50",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(o,{value:"workflow",className:"data-[state=active]:bg-orange-50",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Workflow"]}),e.jsxs(o,{value:"sites",className:"data-[state=active]:bg-orange-50",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Sites"]})]}),e.jsx(x,{value:"overview",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-orange-600"}),"Site Material Dispatch"]})}),e.jsx(l,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Delivery Note"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Project"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Site Location"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Requested By"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Urgency"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Flags"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map((s,a)=>{const r={draft:{color:"bg-gray-100 text-gray-700 border-gray-300",label:"Draft"},pending_approval:{color:"bg-yellow-100 text-yellow-700 border-yellow-300",label:"Pending Approval"},bulk_approved:{color:"bg-[#243d8a]/10 text-[#243d8a]/90 border-[#243d8a]/30",label:"Bulk Approved"},dispatched:{color:"bg-purple-100 text-purple-700 border-purple-300",label:"Dispatched"},delivered:{color:"bg-green-100 text-green-700 border-green-300",label:"Delivered"},acknowledged:{color:"bg-green-100 text-green-700 border-green-300",label:"Acknowledged"}}[s.status];const t=(l=s.supervisorType,{site:{icon:Y,color:"text-orange-600",bgColor:"bg-orange-100"},mep:{icon:H,color:"text-[#243d8a]",bgColor:"bg-[#243d8a]/10"},factory:{icon:C,color:"text-purple-600",bgColor:"bg-purple-100"}}[l]);var l;const n=t.icon;return e.jsxs(f.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.deliveryNoteNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:s.requestDate})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.projectName})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.siteLocation})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1 ${t.bgColor} rounded`,children:e.jsx(n,{className:`w-3 h-3 ${t.color}`})}),e.jsx("div",{className:"text-sm text-gray-900",children:s.requestedBy})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.totalItems})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["AED ",s.totalValue.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(i,{className:`${r.color} border`,children:r.label})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(i,{className:`${Q(s.urgency)} border`,children:s.urgency.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-1",children:e.jsxs(i,{className:s.qtySpecReqFlag?"bg-green-100 text-green-700 border-green-300":"bg-gray-100 text-gray-700 border-gray-300",children:["QTY/SPEC/REQ ",s.qtySpecReqFlag?"✓":"⚠"]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{j(s),N(!0)},className:"text-gray-600 hover:text-gray-900",children:e.jsx(O,{className:"w-4 h-4"})}),"pending_approval"===s.status&&e.jsx(c,{size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white",children:e.jsx(k,{className:"w-4 h-4"})})]})})]},s.id)})})]})})})]})}),e.jsx(x,{value:"workflow",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-orange-600"}),"Site Material Dispatch Workflow Steps"]})}),e.jsx(l,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:A.map((s,a)=>e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"relative",children:[a<A.length-1&&e.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-orange-200"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative z-10 bg-white rounded-full p-2 border-2 border-orange-200",children:e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 text-xs font-bold",children:a+1})})}),e.jsxs("div",{className:"flex-1 bg-white rounded-lg border border-orange-200 p-4 hover:border-orange-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:s.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Actor: ",s.actor]}),"note_approval"===s.stage&&e.jsx("div",{className:"mt-2",children:e.jsx(i,{className:"bg-yellow-100 text-yellow-700 border border-yellow-300 text-xs",children:"QTY/SPEC/REQ FLAG Required"})}),"bulk_qty_approval"===s.stage&&e.jsx("div",{className:"mt-2",children:e.jsx(i,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30 text-xs",children:"Technical Director FLAG"})})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Step ",a+1]})]}),"note_approval"===s.stage&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded border border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("strong",{children:"Rejection Loop:"})," Qty & Spec rejection → Qty & Spec revisions → resubmit"]})}),"bulk_qty_request"===s.stage&&e.jsx("div",{className:"mt-3 p-3 bg-[#243d8a]/5 rounded border border-[#243d8a]/20",children:e.jsxs("p",{className:"text-xs text-[#243d8a]/90",children:[e.jsx("strong",{children:"Conditional:"})," Only triggered when bulk quantity dispatch is needed"]})})]})]})]},s.stage))})})]})}),e.jsx(x,{value:"sites",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-orange-600"}),"Active Sites"]})}),e.jsx(l,{className:"p-6 space-y-4",children:[{site:"Marina Bay Residential",location:"Marina Bay Construction Site",active:3,delivered:8,supervisor:"Site Supervisor",color:"bg-[#243d8a]/10 text-[#243d8a]/90",icon:Y},{site:"Orchard Office Tower",location:"Orchard Tower Site",active:2,delivered:5,supervisor:"MEP Supervisor",color:"bg-purple-100 text-purple-700",icon:H},{site:"Sentosa Resort",location:"Sentosa Resort Site",active:1,delivered:4,supervisor:"Site Supervisor",color:"bg-green-100 text-green-700",icon:C}].map((s,a)=>{const r=s.icon;return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-3 ${s.color} rounded-lg`,children:e.jsx(r,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.site}),e.jsx("p",{className:"text-sm text-gray-600",children:s.location}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(i,{className:s.color,children:s.supervisor})})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:s.active}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:s.delivered}),e.jsx("p",{className:"text-xs text-gray-500",children:"Delivered"})]})]})})]},a)})})]}),e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(r,{className:"bg-gradient-to-r from-orange-50 to-orange-100 border-b",children:e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-orange-600"}),"Supervisor Activity"]})}),e.jsx(l,{className:"p-6 space-y-4",children:[{type:"Site Supervisor",count:b.filter(e=>"site"===e.supervisorType).length,pending:b.filter(e=>"site"===e.supervisorType&&"pending_approval"===e.status).length,color:"bg-orange-100 text-orange-700",icon:Y},{type:"MEP Supervisor",count:b.filter(e=>"mep"===e.supervisorType).length,pending:b.filter(e=>"mep"===e.supervisorType&&"pending_approval"===e.status).length,color:"bg-[#243d8a]/10 text-[#243d8a]/90",icon:H}].map((s,a)=>{const r=s.icon;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 ${s.color} rounded-lg`,children:e.jsx(r,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.type}),e.jsx(i,{className:s.color,children:s.type.split(" ")[0]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.count}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-600",children:s.pending}),e.jsx("p",{className:"text-xs text-gray-500",children:"Pending"})]})]})})]},a)})})]})]})})]}),u&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Workflow: ",h.deliveryNoteNumber]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{N(!1),j(null)},children:"Close"})]}),e.jsx("div",{className:"p-4",children:e.jsx(m,{documentType:"work_order",documentId:h.id,currentUserRole:"Site Supervisor"})})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"New Material Delivery Note"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>y(!1),children:"Close"})]}),e.jsx("div",{className:"p-4",children:e.jsx(J,{})})]})})]})};export{K as default};
