import{j as e}from"./radix-ui-34961435.js";import{R as s}from"./react-vendor-3707ac94.js";import{C as a,b as r,c as t,a as i}from"./card-e62b6216.js";import{a as n,B as l}from"./index-12cad093.js";import{P as c}from"./progress-c4fdb9d3.js";import{m as d}from"./ui-vendor-42d562f2.js";import{F as o,U as p,D as m,A as x,z as u,v as h,R as N,k as g,a as j}from"./icons-2fde7931.js";import"./auth-f9290e45.js";import"./utils-8e4480a0.js";import"./forms-337f692b.js";const E={purchase_requisition:{documentType:"purchase_requisition",requiredFlags:["QTY/SPEC FLAG","COST FLAG","PM FLAG"],approvalSequence:["SITE_SUPERVISOR","PROCUREMENT","PROJECT_MANAGER","ESTIMATION","TECHNICAL_DIRECTOR","ACCOUNTS","DESIGN"],rejectionLoops:{QTY_SPEC_REJECTION:["SITE_SUPERVISOR","PROCUREMENT"],COST_REJECTION:["ESTIMATION","PROJECT_MANAGER"]}},vendor_quotation:{documentType:"vendor_quotation",requiredFlags:["QTY/SCOPE FLAG","PM FLAG"],approvalSequence:["PROCUREMENT","PROJECT_MANAGER","ESTIMATION","TECHNICAL_DIRECTOR","ACCOUNTS","DESIGN"],rejectionLoops:{QTY_SCOPE_REJECTION:["PROJECT_MANAGER","ESTIMATION"]}},material_requisition:{documentType:"material_requisition",requiredFlags:["QTY/SPEC FLAG","PM FLAG"],approvalSequence:["SITE_SUPERVISOR","PROCUREMENT","PROJECT_MANAGER","ESTIMATION","TECHNICAL_DIRECTOR","DESIGN"],rejectionLoops:{QTY_SPEC_REJECTION:["SITE_SUPERVISOR","PROCUREMENT"]}},material_delivery_note:{documentType:"material_delivery_note",requiredFlags:["QTY/SPEC/REQ FLAG"],approvalSequence:["SITE_SUPERVISOR","PROCUREMENT","PROJECT_MANAGER","TECHNICAL_DIRECTOR","DESIGN"],rejectionLoops:{QTY_SPEC_REJECTION:["SITE_SUPERVISOR","PROCUREMENT"]}}},v=()=>{const[v,T]=s.useState([{id:"WF-PR-001",documentType:"purchase_requisition",documentId:"PR-001",currentStep:"PROJECT_MANAGER",progress:40,status:"in_review",flags:{pmFlag:!1,costFlag:!1,qtySpecFlag:!0},approvalHistory:[{step:"SITE_SUPERVISOR",approver:"John Smith",status:"approved",date:"2024-08-25",comments:"Materials approved for site requirements"},{step:"PROCUREMENT",approver:"Sarah Johnson",status:"approved",date:"2024-08-25",comments:"Vendor availability confirmed"}]},{id:"WF-VQ-001",documentType:"vendor_quotation",documentId:"VQ-001",currentStep:"ESTIMATION",progress:60,status:"revision_required",flags:{pmFlag:!0,qtyScopeFlag:!1},approvalHistory:[{step:"PROCUREMENT",approver:"Sarah Johnson",status:"approved",date:"2024-08-24"},{step:"PROJECT_MANAGER",approver:"Mike Wilson",status:"approved",date:"2024-08-25"},{step:"ESTIMATION",approver:"Lisa Chen",status:"rejected",date:"2024-08-25",comments:"Quantity specifications need revision - please update BOQ reference"}]}]),R=e=>{switch(e){case"approved":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"in_review":return"bg-[#243d8a]/10 text-[#243d8a]/90";case"rejected":return"bg-red-100 text-red-700";case"revision_required":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},S=s=>{switch(s){case"approved":return e.jsx(j,{className:"w-4 h-4"});case"pending":return e.jsx(g,{className:"w-4 h-4"});case"in_review":return e.jsx(N,{className:"w-4 h-4"});case"rejected":return e.jsx(h,{className:"w-4 h-4"});case"revision_required":return e.jsx(u,{className:"w-4 h-4"});default:return e.jsx(o,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Workflow Status"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Track document approval progress and workflow states"})]}),e.jsx("div",{className:"grid gap-6",children:v.map(u=>{const N=E[u.documentType];return e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(a,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(t,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"}),u.documentId]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:u.documentType.replace(/_/g," ").toUpperCase()})]}),e.jsxs(n,{className:R(u.status),children:[S(u.status),e.jsx("span",{className:"ml-1",children:u.status.replace(/_/g," ")})]})]})}),e.jsxs(i,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Workflow Progress"}),e.jsxs("span",{children:[u.progress,"%"]})]}),e.jsx(c,{value:u.progress,className:"h-2"})]}),e.jsxs("div",{className:"bg-[#243d8a]/5 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-[#243d8a] mb-2",children:"Current Step"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-[#243d8a]"}),e.jsx("span",{className:"text-[#243d8a]/80",children:u.currentStep.replace(/_/g," ")})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Approval Flags"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:N?.requiredFlags.map(s=>{const a=s.toLowerCase().replace(/[^a-z]/g,""),r=u.flags[a];return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s}),(t=r,!0===t?e.jsx(j,{className:"w-4 h-4 text-green-600"}):!1===t?e.jsx(h,{className:"w-4 h-4 text-red-600"}):e.jsx(g,{className:"w-4 h-4 text-gray-400"}))]},s);var t})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Approval Sequence"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N?.approvalSequence.map((a,r)=>{const t=u.approvalHistory.some(e=>e.step===a&&"approved"===e.status),i=u.currentStep===a,n=u.approvalHistory.some(e=>e.step===a&&"rejected"===e.status);return e.jsxs(s.Fragment,{children:[e.jsx("div",{className:"px-3 py-1 rounded text-xs font-medium "+(t?"bg-green-100 text-green-700":i?"bg-[#243d8a]/10 text-[#243d8a]/90":n?"bg-red-100 text-red-700":"bg-gray-100 text-gray-500"),children:a.replace(/_/g," ")}),r<N.approvalSequence.length-1&&e.jsx(x,{className:"w-4 h-4 text-gray-400 self-center"})]},a)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Approval History"}),e.jsx("div",{className:"space-y-2",children:u.approvalHistory.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded",children:[S(s.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s.step.replace(/_/g," ")}),e.jsx("span",{className:"text-xs text-gray-500",children:s.date})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.approver}),s.comments&&e.jsx("p",{className:"text-sm text-gray-700 mt-1 italic",children:s.comments})]})]},a))})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(l,{variant:"outline",size:"sm",children:"View Document"}),e.jsx(l,{variant:"outline",size:"sm",children:"Add Comment"}),"revision_required"===u.status&&e.jsx(l,{size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:"Submit Revision"})]})]})]})},u.id)})}),e.jsx(a,{className:"bg-[#243d8a]/5 border-[#243d8a]/20",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-[#243d8a] mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-[#243d8a]",children:"Backend Integration Required"}),e.jsx("p",{className:"text-sm text-[#243d8a]/80 mt-1",children:"This page shows the designed workflow structure. Full functionality requires backend API integration for real-time workflow state management, approvals, and flag tracking."})]})]})})})]})};export{v as default};
