import{j as e}from"./radix-ui-34961435.js";import{r as s}from"./react-vendor-3707ac94.js";import{C as a,b as t,c as r,a as l}from"./card-e62b6216.js";import{a as i,B as c}from"./index-12cad093.js";import{T as d,a as n,b as o,c as x}from"./tabs-8d248749.js";import{A as m}from"./ApprovalWorkflow-1ba72061.js";import{u as h}from"./forms-337f692b.js";import{I as p}from"./input-dbd0a11e.js";import{D as u}from"./date-input-8a4c9816.js";import{L as j}from"./label-d100d551.js";import{S as g,a as N,b,c as v,d as y}from"./select-767f455e.js";import{m as f}from"./ui-vendor-42d562f2.js";import{Z as w,g as S,z as q,F as C,aw as k,h as P,aj as D,U as A,u as M,f as R,k as L,Q as F,j as I,aB as T,G as _,t as Q,aF as V,X as E,a2 as W,aA as B,i as z,b as J,A as O,E as U,l as H}from"./icons-2fde7931.js";import"./auth-f9290e45.js";import"./utils-8e4480a0.js";import"./dateFormatter-3b370b4b.js";const G=({onClose:m})=>{const[z,J]=s.useState("basic"),[O,U]=s.useState([{id:"1",materialCode:"MAT-001",materialName:"Steel Rebar 12mm",specification:"Grade 460B, 12mm diameter, 12m length",category:"Steel & Metal",unit:"piece",requestedQuantity:200,availableStock:150,estimatedCost:25.5,totalCost:5100,priority:"high",usage:"Foundation reinforcement",supplier:"Singapore Steel Suppliers",leadTime:5}]),{register:H,handleSubmit:G,watch:$,setValue:Y,formState:{errors:K}}=h(),Z=(e,s,a)=>{U(t=>t.map(t=>{if(t.id===e){const e={...t,[s]:a};return"requestedQuantity"!==s&&"estimatedCost"!==s||(e.totalCost=e.requestedQuantity*e.estimatedCost),e}return t}))},X=O.reduce((e,s)=>e+s.totalCost,0),ee=O.length,se=O.filter(e=>e.requestedQuantity>e.availableStock).length;return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsx(a,{className:"shadow-lg border-0 bg-gradient-to-r from-[#243d8a]/5 to-[#243d8a]/10",children:e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/60 rounded-lg",children:e.jsx(w,{className:"w-8 h-8 text-[#243d8a]"})}),e.jsxs("div",{children:[e.jsx(r,{className:"text-2xl font-bold text-gray-800",children:"Material Requisition Form"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Production & Site Material Request"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),ee," Items"]}),se>0&&e.jsxs(i,{className:"bg-red-100 text-red-700 border border-red-300",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),se," Critical"]})]})]})})}),e.jsxs("form",{onSubmit:G(e=>{(new Date).toISOString();m&&m()}),children:[e.jsxs(d,{value:z,onValueChange:J,className:"space-y-6",children:[e.jsxs(n,{className:"grid grid-cols-4 w-full max-w-2xl bg-white shadow-sm border",children:[e.jsxs(o,{value:"basic",className:"data-[state=active]:bg-[#243d8a]/5 data-[state=active]:text-[#243d8a]/90",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Basic Info"]}),e.jsxs(o,{value:"project",className:"data-[state=active]:bg-[#243d8a]/5 data-[state=active]:text-[#243d8a]/90",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Project Details"]}),e.jsxs(o,{value:"materials",className:"data-[state=active]:bg-[#243d8a]/5 data-[state=active]:text-[#243d8a]/90",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Materials"]}),e.jsxs(o,{value:"delivery",className:"data-[state=active]:bg-[#243d8a]/5 data-[state=active]:text-[#243d8a]/90",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Delivery"]})]}),e.jsx(x,{value:"basic",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-[#243d8a]/5 to-[#243d8a]/10 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-[#243d8a]"}),"Requisition Information"]})}),e.jsxs(l,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-[#243d8a]"}),"Requisition Number"]}),e.jsx(p,{...H("requisitionNumber",{required:"Requisition number is required"}),placeholder:"MRF-2024-001",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"}),K.requisitionNumber&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(q,{className:"w-3 h-3"}),K.requisitionNumber.message]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4 text-[#243d8a]"}),"Requested By"]}),e.jsx(p,{...H("requestedBy",{required:"Requester name is required"}),placeholder:"John Tan - Site Supervisor",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4 text-[#243d8a]"}),"Department"]}),e.jsxs(g,{onValueChange:e=>Y("department",e),children:[e.jsx(N,{className:"focus:border-[#243d8a] focus:ring-[#243d8a]",children:e.jsx(b,{placeholder:"Select department"})}),e.jsxs(v,{children:[e.jsx(y,{value:"production",children:"Production"}),e.jsx(y,{value:"maintenance",children:"Maintenance"}),e.jsx(y,{value:"quality",children:"Quality Control"}),e.jsx(y,{value:"engineering",children:"Engineering"}),e.jsx(y,{value:"site",children:"Site Operations"}),e.jsx(y,{value:"warehouse",children:"Warehouse"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4 text-[#243d8a]"}),"Supervisor Name"]}),e.jsx(p,{...H("supervisorName",{required:"Supervisor name is required"}),placeholder:"Michael Lim",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-[#243d8a]"}),"Request Date"]}),e.jsx(u,{placeholder:"dd/mm/yyyy",...H("requestDate",{required:"Request date is required"}),className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-[#243d8a]"}),"Required Date"]}),e.jsx(u,{placeholder:"dd/mm/yyyy",...H("requiredDate",{required:"Required date is required"}),className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-[#243d8a]"}),"Factory Section"]}),e.jsxs(g,{onValueChange:e=>Y("factorySection",e),children:[e.jsx(N,{className:"focus:border-[#243d8a] focus:ring-[#243d8a]",children:e.jsx(b,{placeholder:"Select section"})}),e.jsxs(v,{children:[e.jsx(y,{value:"joinery",children:"Joinery Workshop"}),e.jsx(y,{value:"furniture",children:"Furniture Production"}),e.jsx(y,{value:"assembly",children:"Assembly Line"}),e.jsx(y,{value:"finishing",children:"Finishing Section"}),e.jsx(y,{value:"packaging",children:"Packaging"}),e.jsx(y,{value:"maintenance",children:"Maintenance"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4 text-[#243d8a]"}),"Urgency Level"]}),e.jsxs(g,{onValueChange:e=>Y("urgencyLevel",e),children:[e.jsx(N,{className:"focus:border-[#243d8a] focus:ring-[#243d8a]",children:e.jsx(b,{placeholder:"Select urgency"})}),e.jsxs(v,{children:[e.jsx(y,{value:"normal",children:"Normal"}),e.jsx(y,{value:"high",children:"High Priority"}),e.jsx(y,{value:"urgent",children:"Urgent"}),e.jsx(y,{value:"critical",children:"Critical"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4 text-[#243d8a]"}),"Purpose of Requisition"]}),e.jsx("textarea",{...H("purpose",{required:"Purpose is required"}),rows:3,placeholder:"Describe the purpose and intended use of materials...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-[#243d8a] focus:ring-1 focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4 text-[#243d8a]"}),"Justification"]}),e.jsx("textarea",{...H("justification"),rows:3,placeholder:"Business justification for urgent or high-value requisitions...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-[#243d8a] focus:ring-1 focus:ring-[#243d8a]"})]})]})]})}),e.jsx(x,{value:"project",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-[#243d8a]/5 to-[#243d8a]/10 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-[#243d8a]"}),"Project Information"]})}),e.jsx(l,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4 text-[#243d8a]"}),"Project Name"]}),e.jsx(p,{...H("projectName",{required:"Project name is required"}),placeholder:"Marina Bay Residential Project",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-[#243d8a]"}),"Project ID"]}),e.jsx(p,{...H("projectId",{required:"Project ID is required"}),placeholder:"PRJ-2024-001",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4 text-[#243d8a]"}),"Work Location"]}),e.jsx(p,{...H("workLocation",{required:"Work location is required"}),placeholder:"Factory Floor A / Site Location",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-[#243d8a]"}),"Work Order Number"]}),e.jsx(p,{...H("workOrderNumber"),placeholder:"WO-2024-001",className:"focus:border-[#243d8a] focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4 text-[#243d8a]"}),"Production Line"]}),e.jsxs(g,{onValueChange:e=>Y("productionLine",e),children:[e.jsx(N,{className:"focus:border-[#243d8a] focus:ring-[#243d8a]",children:e.jsx(b,{placeholder:"Select production line"})}),e.jsxs(v,{children:[e.jsx(y,{value:"line-1",children:"Production Line 1"}),e.jsx(y,{value:"line-2",children:"Production Line 2"}),e.jsx(y,{value:"line-3",children:"Production Line 3"}),e.jsx(y,{value:"custom",children:"Custom Workshop"}),e.jsx(y,{value:"assembly",children:"Assembly Area"}),e.jsx(y,{value:"finishing",children:"Finishing Area"})]})]})]})]})})]})}),e.jsx(x,{value:"materials",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-[#243d8a]/5 to-[#243d8a]/10 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-[#243d8a]"}),"Material Items"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(i,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Total: AED ",X.toLocaleString()]}),e.jsxs(c,{type:"button",size:"sm",onClick:()=>{const e={id:Date.now().toString(),materialCode:"",materialName:"",specification:"",category:"",unit:"piece",requestedQuantity:0,availableStock:0,estimatedCost:0,totalCost:0,priority:"medium",usage:"",supplier:"",leadTime:0};U([...O,e])},className:"bg-[#243d8a] hover:bg-[#243d8a]/90 text-white",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Add Material"]})]})]})}),e.jsx(l,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Requested"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:O.map(s=>{const a=(t=s.requestedQuantity,(r=s.availableStock)>=t?{color:"bg-green-100 text-green-700 border-green-300",label:"In Stock"}:r>0?{color:"bg-yellow-100 text-yellow-700 border-yellow-300",label:"Partial"}:{color:"bg-red-100 text-red-700 border-red-300",label:"Out of Stock"});var t,r;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(p,{value:s.materialCode,onChange:e=>Z(s.id,"materialCode",e.target.value),className:"min-w-[100px] text-sm",placeholder:"MAT-001"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(p,{value:s.materialName,onChange:e=>Z(s.id,"materialName",e.target.value),className:"min-w-[150px] text-sm",placeholder:"Material name"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(g,{value:s.category,onValueChange:e=>Z(s.id,"category",e),children:[e.jsx(N,{className:"min-w-[120px]",children:e.jsx(b,{placeholder:"Category"})}),e.jsxs(v,{children:[e.jsx(y,{value:"steel",children:"Steel & Metal"}),e.jsx(y,{value:"wood",children:"Wood & Timber"}),e.jsx(y,{value:"concrete",children:"Concrete & Cement"}),e.jsx(y,{value:"electrical",children:"Electrical"}),e.jsx(y,{value:"plumbing",children:"Plumbing"}),e.jsx(y,{value:"hardware",children:"Hardware"}),e.jsx(y,{value:"tools",children:"Tools & Equipment"}),e.jsx(y,{value:"consumables",children:"Consumables"})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(g,{value:s.unit,onValueChange:e=>Z(s.id,"unit",e),children:[e.jsx(N,{className:"min-w-[80px]",children:e.jsx(b,{})}),e.jsxs(v,{children:[e.jsx(y,{value:"piece",children:"Piece"}),e.jsx(y,{value:"meter",children:"Meter"}),e.jsx(y,{value:"kg",children:"Kg"}),e.jsx(y,{value:"liter",children:"Liter"}),e.jsx(y,{value:"sqm",children:"Sq.M"}),e.jsx(y,{value:"cum",children:"Cu.M"})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(p,{type:"number",value:s.requestedQuantity,onChange:e=>Z(s.id,"requestedQuantity",Number(e.target.value)),className:"min-w-[80px] text-sm"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{type:"number",value:s.availableStock,onChange:e=>Z(s.id,"availableStock",Number(e.target.value)),className:"min-w-[70px] text-sm"}),e.jsx(i,{className:`${a.color} text-xs`,children:a.label})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{type:"number",step:"0.01",value:s.estimatedCost,onChange:e=>Z(s.id,"estimatedCost",Number(e.target.value)),className:"min-w-[80px] text-sm"}),e.jsxs("div",{className:"text-xs font-semibold text-gray-600",children:["AED ",s.totalCost.toLocaleString()]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(g,{value:s.priority,onValueChange:e=>Z(s.id,"priority",e),children:[e.jsx(N,{className:"min-w-[100px]",children:e.jsx(b,{})}),e.jsxs(v,{children:[e.jsx(y,{value:"low",children:"Low"}),e.jsx(y,{value:"medium",children:"Medium"}),e.jsx(y,{value:"high",children:"High"}),e.jsx(y,{value:"urgent",children:"Urgent"})]})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(c,{type:"button",size:"sm",variant:"outline",onClick:()=>{return e=s.id,void U(O.filter(s=>s.id!==e));var e},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Q,{className:"w-4 h-4"})})})]},s.id)})})]})})})]})}),e.jsx(x,{value:"delivery",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-[#243d8a]/5 to-[#243d8a]/10 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-[#243d8a]"}),"Delivery Instructions"]})}),e.jsxs(l,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(P,{className:"w-4 h-4 text-[#243d8a]"}),"Delivery Instructions"]}),e.jsx("textarea",{...H("deliveryInstructions"),rows:4,placeholder:"Specific delivery instructions, location details, contact person, timing requirements...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-[#243d8a] focus:ring-1 focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4 text-[#243d8a]"}),"Special Handling Requirements"]}),e.jsx("textarea",{...H("specialHandling"),rows:4,placeholder:"Special handling, storage requirements, safety precautions, temperature controls...",className:"w-full p-3 border border-gray-200 rounded-lg focus:border-[#243d8a] focus:ring-1 focus:ring-[#243d8a]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{className:"text-sm font-semibold flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4 text-[#243d8a]"}),"Supporting Documents"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[#243d8a]/30 transition-colors",children:[e.jsx(V,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload drawings, specifications, work orders"}),e.jsx(c,{type:"button",variant:"outline",size:"sm",children:"Select Files"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-[#243d8a]/5 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-[#243d8a]",children:ee}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-[#243d8a]",children:se}),e.jsx("div",{className:"text-sm text-gray-600",children:"Critical Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-lg text-[#243d8a]",children:["AED ",X.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-[#243d8a]",children:Math.max(...O.map(e=>e.leadTime))}),e.jsx("div",{className:"text-sm text-gray-600",children:"Max Lead Time (days)"})]})]})]})]})})]}),e.jsx(a,{className:"shadow-lg border-2 border-[#243d8a]/20",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{className:"font-semibold",children:["Total Requisition Value: ",e.jsxs("span",{className:"text-[#243d8a]",children:["AED ",X.toLocaleString()]})]}),e.jsx("p",{className:"text-xs mt-1",children:"This requisition will be submitted for quantity & specification approval"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(c,{type:"button",variant:"outline",onClick:m,children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),"Cancel"]}),e.jsxs(c,{type:"button",variant:"outline",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),"Save Draft"]}),e.jsxs(c,{type:"submit",className:"bg-[#243d8a] hover:bg-[#243d8a]/90 text-white",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"Submit for Approval"]})]})]})})})]})]})},$=()=>{const[h,p]=s.useState("overview"),[u,j]=s.useState(null),[g,N]=s.useState(!1),[b,v]=s.useState(!1),[y,q]=s.useState([]),P=e=>({draft:{color:"bg-gray-100 text-gray-700 border-gray-300",label:"Draft"},pending_approval:{color:"bg-yellow-100 text-yellow-700 border-yellow-300",label:"Pending Approval"},approved:{color:"bg-[#243d8a]/10 text-[#243d8a]/90 border-[#243d8a]/30",label:"Approved"},dispatched:{color:"bg-purple-100 text-purple-700 border-purple-300",label:"Dispatched"},in_production:{color:"bg-orange-100 text-orange-700 border-orange-300",label:"In Production"},completed:{color:"bg-green-100 text-green-700 border-green-300",label:"Completed"}}[e]),D=e=>({requested:{icon:C,color:"text-gray-600",bgColor:"bg-gray-100"},bulk_approved:{icon:z,color:"text-[#243d8a]",bgColor:"bg-[#243d8a]/10"},dispatched:{icon:S,color:"text-purple-600",bgColor:"bg-purple-100"},in_production:{icon:R,color:"text-orange-600",bgColor:"bg-orange-100"},completed:{icon:z,color:"text-green-600",bgColor:"bg-green-100"}}[e]),A=[{stage:"requested",label:"Material Requested",actor:"Site Supervisor"},{stage:"qty_spec_approval",label:"Qty & Spec Approval",actor:"Project Manager / Estimation"},{stage:"bulk_qty_approval",label:"Bulk Qty Approval",actor:"Technical Director / Accounts"},{stage:"dispatch",label:"Material Dispatch",actor:"Procurement / Store In Charge"},{stage:"production",label:"Joinery & Furniture Production",actor:"Site Supervisor"},{stage:"acknowledgement",label:"Dispatch Acknowledgement",actor:"Multiple Parties"},{stage:"design_reference",label:"Design Reference Inputs",actor:"Design"},{stage:"completed",label:"Task Completion",actor:"System"}],M=y.length,F=y.filter(e=>"pending_approval"===e.status).length,I=y.filter(e=>"in_production"===e.status).length,T=y.filter(e=>"completed"===e.status).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl shadow-xl p-6 text-gray-800 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/60 rounded-lg",children:e.jsx(w,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Material Dispatch - Production"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Factory Production & Joinery Material Flow"})]})]}),e.jsxs(c,{onClick:()=>v(!0),className:"bg-purple-600 hover:bg-purple-700 text-white flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"New Material Request"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:M})]})]})})}),e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(L,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:F})]})]})})}),e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(R,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Production"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:I})]})]})})}),e.jsx(a,{className:"border-0 shadow-md",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(z,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:T})]})]})})})]}),e.jsxs(d,{value:h,onValueChange:p,className:"space-y-6",children:[e.jsxs(n,{className:"grid grid-cols-3 w-full max-w-md bg-white shadow-sm border",children:[e.jsxs(o,{value:"overview",className:"data-[state=active]:bg-purple-50",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Overview"]}),e.jsxs(o,{value:"workflow",className:"data-[state=active]:bg-purple-50",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Workflow"]}),e.jsxs(o,{value:"production",className:"data-[state=active]:bg-purple-50",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Production"]})]}),e.jsx(x,{value:"overview",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-purple-600"}),"Material Dispatch Requests"]})}),e.jsx(l,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Requisition"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Project"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Section"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Requested By"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Flags"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map((s,a)=>{const t=P(s.status);return D(s.productionStage),e.jsxs(f.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"hover:bg-gray-50 transition-colors duration-200",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.requisitionNumber}),e.jsx("div",{className:"text-sm text-gray-500",children:s.requestDate})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.projectName})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(i,{variant:"outline",className:"text-xs",children:s.factorySection})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.requestedBy})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.totalItems})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["AED ",s.totalValue.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(i,{className:`${t.color} border`,children:t.label})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-1",children:e.jsxs(i,{className:s.qtySpecFlag?"bg-green-100 text-green-700 border-green-300":"bg-gray-100 text-gray-700 border-gray-300",children:["QTY/SPEC ",s.qtySpecFlag?"✓":"⚠"]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{j(s),N(!0)},className:"text-gray-600 hover:text-gray-900",children:e.jsx(U,{className:"w-4 h-4"})}),"pending_approval"===s.status&&e.jsx(c,{size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",children:e.jsx(H,{className:"w-4 h-4"})})]})})]},s.id)})})]})})})]})}),e.jsx(x,{value:"workflow",children:e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-purple-600"}),"Production Material Workflow Steps"]})}),e.jsx(l,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:A.map((s,a)=>e.jsxs(f.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"relative",children:[a<A.length-1&&e.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-purple-200"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative z-10 bg-white rounded-full p-2 border-2 border-purple-200",children:e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-600 text-xs font-bold",children:a+1})})}),e.jsxs("div",{className:"flex-1 bg-white rounded-lg border border-purple-200 p-4 hover:border-purple-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:s.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Actor: ",s.actor]}),"qty_spec_approval"===s.stage&&e.jsx("div",{className:"mt-2",children:e.jsx(i,{className:"bg-yellow-100 text-yellow-700 border border-yellow-300 text-xs",children:"QTY/SPEC FLAG Required"})}),"bulk_qty_approval"===s.stage&&e.jsx("div",{className:"mt-2",children:e.jsx(i,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30 text-xs",children:"Bulk Qty Dispatch Gating"})})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Step ",a+1]})]}),"qty_spec_approval"===s.stage&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded border border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("strong",{children:"Rejection Loop:"})," Qty & Spec rejection → Qty & Spec revisions → resubmit"]})})]})]})]},s.stage))})})]})}),e.jsx(x,{value:"production",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-purple-600"}),"Production Status"]})}),e.jsx(l,{className:"p-6 space-y-4",children:y.filter(e=>"draft"!==e.status&&"pending_approval"!==e.status).map(s=>{const a=D(s.productionStage),t=a.icon;return e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-2 ${a.bgColor} rounded-lg`,children:e.jsx(t,{className:`w-5 h-5 ${a.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.requisitionNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:s.projectName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(i,{className:P(s.status).color,children:P(s.status).label}),s.bulkQtyApproved&&e.jsx(i,{className:"bg-[#243d8a]/10 text-[#243d8a]/90 border border-[#243d8a]/30 text-xs",children:"Bulk Qty ✓"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[s.totalItems," items"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["AED ",s.totalValue.toLocaleString()]})]})]},s.id)})})]}),e.jsxs(a,{className:"shadow-lg border-0",children:[e.jsx(t,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-b",children:e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-purple-600"}),"Factory Sections"]})}),e.jsx(l,{className:"p-6 space-y-4",children:[{section:"Joinery Workshop",active:2,completed:5,color:"bg-[#243d8a]/10 text-[#243d8a]/90"},{section:"Furniture Production",active:1,completed:3,color:"bg-green-100 text-green-700"},{section:"Custom Workshop",active:1,completed:2,color:"bg-purple-100 text-purple-700"},{section:"Assembly Line",active:0,completed:4,color:"bg-orange-100 text-orange-700"},{section:"Finishing Section",active:0,completed:2,color:"bg-pink-100 text-pink-700"}].map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800",children:s.section}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(i,{className:s.color,children:s.section.split(" ")[0]})})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-orange-600",children:s.active}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-green-600",children:s.completed}),e.jsx("p",{className:"text-xs text-gray-500",children:"Done"})]})]})})]},a))})]})]})})]}),g&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Workflow: ",u.requisitionNumber]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{N(!1),j(null)},children:"Close"})]}),e.jsx("div",{className:"p-4",children:e.jsx(m,{documentType:"purchase_requisition",documentId:u.id,currentUserRole:"Site Supervisor"})})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"New Material Requisition"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>v(!1),children:"Close"})]}),e.jsx("div",{className:"p-4",children:e.jsx(G,{})})]})})]})};export{$ as default};
