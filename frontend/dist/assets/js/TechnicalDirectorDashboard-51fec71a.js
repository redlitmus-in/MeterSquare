import{j as e}from"./radix-ui-34961435.js";import{r as s}from"./react-vendor-3707ac94.js";import{C as a,a as r,b as t,c}from"./card-e62b6216.js";import{B as i}from"./index-12cad093.js";import{t as l}from"./technicalDirectorService-7b18d54a.js";import{q as n,m as d,k as o,c as p,aR as h,aS as x,b as m,O as u,a as j,B as g}from"./icons-2fde7931.js";import{m as v}from"./ui-vendor-42d562f2.js";import{R as _,A as f,C as y,X as N,Y as b,T as w,d as A,f as k,P,b as C,c as S,B as O,e as R}from"./charts-4816d993.js";import"./auth-f9290e45.js";import"./utils-8e4480a0.js";import"./forms-337f692b.js";const D=()=>{s.useState("6months");const[D,z]=s.useState(null),[K,$]=s.useState(!0);s.useState(!1),s.useEffect(()=>{M()},[]);const M=async()=>{try{$(!0);const e=await l.getTechnicalDirectorDashboard();z(e)}catch(e){}finally{$(!1)}},T=[{month:"Jan",approved:D?.technical_director_as_sender.approved_value||0,pending:D?.technical_director_as_receiver.pending_value||0},{month:"Feb",approved:1.1*(D?.technical_director_as_sender.approved_value||0),pending:.9*(D?.technical_director_as_receiver.pending_value||0)},{month:"Mar",approved:.9*(D?.technical_director_as_sender.approved_value||0),pending:1.1*(D?.technical_director_as_receiver.pending_value||0)},{month:"Apr",approved:1.2*(D?.technical_director_as_sender.approved_value||0),pending:.8*(D?.technical_director_as_receiver.pending_value||0)},{month:"May",approved:1.3*(D?.technical_director_as_sender.approved_value||0),pending:1.2*(D?.technical_director_as_receiver.pending_value||0)},{month:"Jun",approved:1.4*(D?.technical_director_as_sender.approved_value||0),pending:1*(D?.technical_director_as_receiver.pending_value||0)}],E=[{name:"Approved",value:D?.technical_director_as_sender.approved_count||0,color:"#10b981"},{name:"Pending",value:D?.technical_director_as_receiver.pending_count||0,color:"#f59e0b"},{name:"Rejected",value:D?.technical_director_as_sender.rejected_count||0,color:"#ef4444"}],F=[{dept:"Approved",target:80,actual:D?Math.round(D.technical_director_as_sender.approved_count/(D.technical_director_as_sender.total_count||1)*100):0},{dept:"Pending",target:15,actual:D?Math.round(D.technical_director_as_receiver.pending_count/(D.technical_director_as_receiver.total_count||1)*100):0},{dept:"Efficiency",target:85,actual:D?Math.round((D.technical_director_as_sender.approved_count+D.technical_director_as_sender.rejected_count)/(D.summary.total_unique_purchases||1)*100):0},{dept:"Response",target:90,actual:87}],V=D?.technical_director_as_sender.approved_value||0,q=D?.technical_director_as_receiver.pending_value||0,B=D?D.technical_director_as_sender.approved_count/(D.technical_director_as_sender.total_count||1)*100:0,G=[{title:"Total Value",value:l.formatCurrency(V+q),change:V>q?"+12.5%":"-5.2%",trend:V>q?"up":"down",period:"Approved + Pending",icon:n,color:"text-green-600",bgColor:"bg-green-50"},{title:"Purchases",value:(D?.summary.total_unique_purchases||0).toString(),change:"+8.3%",trend:"up",period:"Total unique",icon:d,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Pending",value:(D?.technical_director_as_receiver.pending_count||0).toString(),change:(D?.technical_director_as_receiver.pending_count??0)>5?"+25%":"-15%",trend:(D?.technical_director_as_receiver.pending_count??0)>5?"up":"down",period:"Awaiting review",icon:o,color:"text-orange-600",bgColor:"bg-orange-50"},{title:"Approval Rate",value:`${B.toFixed(1)}%`,change:B>80?"+3.2%":"-2.1%",trend:B>80?"up":"down",period:"Overall",icon:p,color:"text-purple-600",bgColor:"bg-purple-50"}],J=[{label:"Approval Rate",value:B,color:"bg-red-500"},{label:"Response Time",value:87,color:"bg-blue-500"},{label:"Value Efficiency",value:D?Math.min(D.technical_director_as_sender.approved_value/(D.technical_director_as_sender.approved_value+D.technical_director_as_sender.rejected_value+D.technical_director_as_receiver.pending_value||1)*100,100):0,color:"bg-green-500"},{label:"Overall Score",value:D?Math.round((B+87+91)/3):0,color:"bg-purple-500"}];return e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Technical Director Dashboard"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Comprehensive overview of purchase approvals and decisions"})]})}),K?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>e.jsx(a,{className:"animate-pulse",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]})})},s))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:G.map((s,t)=>e.jsx(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:e.jsx(a,{className:"relative overflow-hidden",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:s.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.value}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center "+("up"===s.trend?"text-green-600":"text-red-600"),children:["up"===s.trend?e.jsx(h,{className:"h-4 w-4"}):e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:s.change})]}),e.jsx("span",{className:"text-xs text-gray-500",children:s.period})]})]}),e.jsx("div",{className:`${s.bgColor} p-3 rounded-lg`,children:e.jsx(s.icon,{className:`h-6 w-6 ${s.color}`})})]})})})},s.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(a,{className:"lg:col-span-2",children:[e.jsxs(t,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-red-500"}),e.jsx(c,{children:"Approval Value Analysis"})]}),e.jsx(i,{variant:"ghost",size:"icon",children:e.jsx(u,{className:"h-4 w-4"})})]}),e.jsx(r,{children:e.jsx(_,{width:"100%",height:300,children:e.jsxs(f,{data:T,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorApproved",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorPending",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:0})]})]}),e.jsx(y,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(N,{dataKey:"month",stroke:"#888",fontSize:12}),e.jsx(b,{stroke:"#888",fontSize:12,tickFormatter:e=>`AED ${(e/1e3).toFixed(0)}K`}),e.jsx(w,{formatter:e=>[l.formatCurrency(e),""]}),e.jsx(A,{}),e.jsx(k,{type:"monotone",dataKey:"approved",stroke:"#10b981",fillOpacity:1,fill:"url(#colorApproved)",strokeWidth:2,name:"Approved Value"}),e.jsx(k,{type:"monotone",dataKey:"pending",stroke:"#f59e0b",fillOpacity:1,fill:"url(#colorPending)",strokeWidth:2,name:"Pending Value"})]})})})]}),e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-green-500"}),e.jsx(c,{children:"Purchase Status"})]}),e.jsx(i,{variant:"ghost",size:"icon",children:e.jsx(u,{className:"h-4 w-4"})})]}),e.jsxs(r,{children:[e.jsx(_,{width:"100%",height:250,children:e.jsxs(P,{children:[e.jsx(C,{data:E,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:2,dataKey:"value",children:E.map((s,a)=>e.jsx(S,{fill:s.color},`cell-${a}`))}),e.jsx(w,{})]})}),e.jsx("div",{className:"mt-4 space-y-2",children:E.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm text-gray-600",children:s.name})]}),e.jsx("span",{className:"text-sm font-medium",children:s.value})]},s.name))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),e.jsx(c,{children:"Approval Performance"})]}),e.jsx(i,{variant:"ghost",size:"icon",children:e.jsx(u,{className:"h-4 w-4"})})]}),e.jsx(r,{children:e.jsx(_,{width:"100%",height:250,children:e.jsxs(O,{data:F,children:[e.jsx(y,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(N,{dataKey:"dept",stroke:"#888",fontSize:12}),e.jsx(b,{stroke:"#888",fontSize:12}),e.jsx(w,{formatter:e=>[`${e}%`,""]}),e.jsx(A,{}),e.jsx(R,{dataKey:"target",fill:"#e5e7eb",name:"Target %"}),e.jsx(R,{dataKey:"actual",fill:"#ef4444",name:"Actual %"})]})})})]}),e.jsxs(a,{children:[e.jsxs(t,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5 text-red-500"}),e.jsx(c,{children:"Performance Overview"})]}),e.jsx(i,{variant:"ghost",size:"icon",children:e.jsx(u,{className:"h-4 w-4"})})]}),e.jsx(r,{className:"space-y-6",children:J.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s.label}),e.jsxs("span",{className:"text-lg font-bold",children:[s.value.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`${s.color} h-2 rounded-full transition-all duration-500`,style:{width:`${s.value}%`}})})]},s.label))})]})]}),e.jsxs(a,{children:[e.jsx(t,{children:e.jsx(c,{children:"Recent Activities"})}),e.jsx(r,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Purchase #1234 approved and sent to Accounts",time:"2 hours ago",type:"success"},{action:"Purchase #1231 rejected - sent back to Estimation",time:"4 hours ago",type:"warning"},{action:"Purchase #1228 approved for AED 45,000",time:"6 hours ago",type:"success"},{action:"Purchase #1225 pending technical review",time:"8 hours ago",type:"info"}].map((s,a)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+("success"===s.type?"bg-green-500":"warning"===s.type?"bg-yellow-500":"bg-blue-500")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.action}),e.jsx("p",{className:"text-xs text-gray-500",children:s.time})]})]},a))})})]})]})};export{D as default};
