import{j as e}from"./radix-ui-34961435.js";import{r as t}from"./react-vendor-3707ac94.js";import{d as a}from"./index-12cad093.js";import{f as s,b as i,p as r}from"./dateFormatter-3b370b4b.js";import{u as n}from"./icons-2fde7931.js";const o=t.forwardRef(({className:o,value:l,onChange:d,onBlur:c,placeholder:f="dd/mm/yyyy",min:m,max:u,...p},h)=>{const[x,b]=t.useState(""),[y,g]=t.useState(!1),[v,w]=t.useState("");t.useEffect(()=>{if(l)if(l.match(/^\d{4}-\d{2}-\d{2}$/)){const e=new Date(l);b(s(e)),w(l)}else if(l.match(/^\d{2}\/\d{2}\/\d{4}$/))b(l),w(i(l));else{const e=s(l);b(e),w(i(e))}else b(""),w("")},[l]);return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:h,type:"text",value:x,onChange:e=>{const t=e.target.value;if(b(t),t.match(/^\d{2}\/\d{2}\/\d{4}$/)){const e=r(t);if(e){const a=i(e);if(m){if(new Date(a)<new Date(m))return}if(u){if(new Date(a)>new Date(u))return}w(a),d?.(t)}}else""===t&&(w(""),d?.(""))},onBlur:c,placeholder:f,pattern:"\\d{2}/\\d{2}/\\d{4}",className:a("flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),...p}),e.jsx("button",{type:"button",onClick:()=>{g(!0),setTimeout(()=>{const e=document.getElementById("hidden-date-picker");e&&e.showPicker?.()},100)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Open date picker",title:"Open date picker",children:e.jsx(n,{className:"w-4 h-4"})})]}),e.jsx("input",{id:"hidden-date-picker",type:"date",value:v,onChange:e=>{const t=e.target.value;if(t){const e=new Date(t),a=s(e);b(a),w(t),d?.(a)}else b(""),w(""),d?.("");g(!1)},className:"absolute opacity-0 pointer-events-none",tabIndex:-1,"aria-label":"Date picker",title:"Date picker",min:m,max:u})]})});o.displayName="DateInput";export{o as D};
