import{b as t,c as e}from"./index-12cad093.js";const s=new class{async submitApproval(s,r=""){try{const a={purchase_id:s,technical_director_status:"approved",comments:r};return(await t.post(e.TECHNICAL_DIRECTOR.APPROVAL,a)).data}catch(a){throw a}}async submitRejection(s,r,a=""){try{const n={purchase_id:s,technical_director_status:"rejected",rejection_reason:r,comments:a};return(await t.post(e.TECHNICAL_DIRECTOR.APPROVAL,n)).data}catch(n){throw n}}async getTechnicalDirectorPurchases(){try{return(await t.get(e.TECHNICAL_DIRECTOR.PURCHASES)).data}catch(s){if(404===s.response?.status||500===s.response?.status)return{success:!0,summary:{total_count:0,approved_count:0,rejected_count:0,pending_count:0,total_value:0,approved_value:0,rejected_value:0,pending_value:0,total_quantity:0,approved_quantity:0,rejected_quantity:0,pending_quantity:0},purchases:[],user_info:{user_name:"",user_id:0,role:"technicalDirector"},last_updated:(new Date).toISOString()};throw s}}async getPurchaseDetails(s){try{return(await t.get(e.TECHNICAL_DIRECTOR.PURCHASE_DETAILS(s))).data}catch(r){if(404===r.response?.status)return{success:!1,message:"Purchase details not found",purchase:null,materials:[],history:[]};if(403===r.response?.status)return{success:!1,message:"You do not have permission to view this purchase",purchase:null,materials:[],history:[]};throw r}}async getPurchaseHistory(s){try{return(await t.get(e.TECHNICAL_DIRECTOR.PURCHASE_HISTORY(s))).data}catch(r){if(404===r.response?.status)return{success:!1,message:"Purchase history not found",purchase:null,history:[]};if(403===r.response?.status)return{success:!1,message:"You do not have permission to view purchase history",purchase:null,history:[]};throw r}}getTechnicalDirectorStatus(t){if(t.technical_director_status)return t.technical_director_status;if(t.status_info){const e="technicalDirector"===t.status_info.sender,s="technicalDirector"===t.status_info.receiver;if(e)return t.status_info.status||"pending";if(s&&"pending"===t.status_info.status)return"pending"}return"pending"}needsTechnicalDirectorReview(t){const e=t.technical_director_status;if("approved"===e||"rejected"===e)return!1;return"approved"===t.estimation_status&&(!e||"pending"===e)}formatCurrency(t){return`AED ${t.toLocaleString()}`}};export{s as t};
